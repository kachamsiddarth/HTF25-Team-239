<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile - AI Threads</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
:root {
  --bg-primary: #0a0e1a;
  --bg-secondary: #111827;
  --card-bg: #1f2937;
  --card-border: #374151;
  --accent-gradient: linear-gradient(135deg,#3b82f6 0%,#8b5cf6 50%,#a855f7 100%);
  --text-primary: #f9fafb;
  --text-secondary: #9ca3af;
  --text-muted: #6b7280;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}
body{background:linear-gradient(180deg,var(--bg-primary) 0%,var(--bg-secondary) 100%);color:var(--text-primary);min-height:100vh;}
header{display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem;background:var(--bg-secondary);box-shadow:0 4px 10px rgba(0,0,0,0.2);}
header h1{font-size:1.5rem;background:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.header-actions{display:flex;gap:10px;}
.btn{padding:0.5rem 1rem;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:all 0.3s ease;}
.btn-logout{background:#ef4444;color:white;}
.btn-logout:hover{background:#dc2626;}
.btn-dashboard{background:#3b82f6;color:white;}
.btn-dashboard:hover{opacity:0.9;}
main{padding:2rem; max-width:600px; margin:0 auto;}
.card{background:var(--card-bg);border:1px solid var(--card-border);padding:2rem;border-radius:16px;box-shadow:0 5px 20px rgba(0,0,0,0.3);}
.card h2{margin-bottom:1rem;color:var(--text-secondary);}
.card p{margin:0.5rem 0;font-size:1rem;}
input.form-input{width:100%;padding:0.75rem;border-radius:12px;border:1px solid #4b5563;background:#1f2937;color:white;font-size:1rem;margin-top:0.5rem;}
button.btn-save{background:var(--accent-gradient);color:white;margin-top:1rem;}
button.btn-save:hover{opacity:0.9;}
</style>
</head>
<body>

<header>
  <h1>AI Threads Profile</h1>
  <div class="header-actions">
    <button class="btn btn-dashboard" id="dashboardBtn">Dashboard</button>
    <button class="btn btn-logout" id="logoutBtn">Logout</button>
  </div>
</header>

<main>
  <div class="card" id="profileCard">
    <h2>Your Profile</h2>
    <p><strong>Username:</strong> <span id="usernameDisplay"></span></p>
    <p><strong>Email:</strong> <span id="emailDisplay"></span></p>

    <h2>Update Info</h2>
    <label>Username</label>
    <input type="text" id="usernameInput" class="form-input">
    <label>Email</label>
    <input type="email" id="emailInput" class="form-input">
    <button class="btn btn-save" id="saveBtn">Save Changes</button>
  </div>
</main>

<script>
document.addEventListener('DOMContentLoaded', ()=>{
  const logoutBtn = document.getElementById('logoutBtn');
  const dashboardBtn = document.getElementById('dashboardBtn');
  const usernameDisplay = document.getElementById('usernameDisplay');
  const emailDisplay = document.getElementById('emailDisplay');
  const usernameInput = document.getElementById('usernameInput');
  const emailInput = document.getElementById('emailInput');
  const saveBtn = document.getElementById('saveBtn');

  let currentUser = localStorage.getItem('currentUser');
  if(!currentUser){ window.location.href='auth.html'; return; }

  let users = JSON.parse(localStorage.getItem('users') || '[]');
  let userObj = users.find(u => u.username === currentUser);

  if(!userObj){ alert('User not found'); localStorage.removeItem('currentUser'); window.location.href='auth.html'; return; }

  function renderProfile(){
    usernameDisplay.textContent = userObj.username;
    emailDisplay.textContent = userObj.email || 'Not set';
    usernameInput.value = userObj.username;
    emailInput.value = userObj.email || '';
  }

  saveBtn.addEventListener('click', ()=>{
    const newUsername = usernameInput.value.trim();
    const newEmail = emailInput.value.trim();
    if(!newUsername){ alert('Username cannot be empty'); return; }
    userObj.username = newUsername;
    userObj.email = newEmail;
    localStorage.setItem('users', JSON.stringify(users));
    localStorage.setItem('currentUser', newUsername);
    alert('Profile updated successfully!');
    renderProfile();
  });

  logoutBtn.addEventListener('click', ()=>{ localStorage.removeItem('currentUser'); window.location.href='auth.html'; });
  dashboardBtn.addEventListener('click', ()=>{ window.location.href='dashboard.html'; });

  renderProfile();
});
</script>

</body>
</html>
